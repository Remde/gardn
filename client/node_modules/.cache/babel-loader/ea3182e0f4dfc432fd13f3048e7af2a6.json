{"ast":null,"code":"import _classCallCheck from\"/Users/brunomoraes/Desktop/gardn/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/brunomoraes/Desktop/gardn/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/brunomoraes/Desktop/gardn/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/brunomoraes/Desktop/gardn/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Navbar from\"../Components/navbar\";import MainScreen from\"../Components/mainscreen\";import TextInput from\"../Components/textinput\";import socketIOClient from\"socket.io-client\";var socket=socketIOClient(\"http://161.35.136.196:5000/\");var Chat=/*#__PURE__*/function(_React$Component){_inherits(Chat,_React$Component);var _super=_createSuper(Chat);function Chat(){var _this;_classCallCheck(this,Chat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={messageList:[],messageKey:0,userList:[]};_this.componentDidMount=function(){socket.emit(\"user update\",_this.props.username);_this.userListReceive();_this.messageReceive();};_this.getTime=function(){console.log(_this.state.userList);var myDate=new Date().toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/,\"$1\");return myDate.slice(0,5);};_this.userListReceive=function(){socket.on(\"user update\",function(userList){_this.setState({userList:userList});});};_this.messageReceive=function(){socket.on(\"chat message\",function(message){_this.addMessage(message);});};_this.messageSend=function(message){var newMessageKey;message={message:message,author:_this.props.username,date:_this.getTime(),id:socket.id,key:_this.state.messageKey};newMessageKey=1+_this.state.messageKey;_this.setState({messageKey:newMessageKey});_this.addMessage(message);socket.emit(\"chat message\",message);};_this.onButtonClick=function(event){_this.props.unauthenticator();};_this.addMessage=function(message){var newEntry=message;var newState=_this.state.messageList;newState.push(newEntry);_this.setState(function(state){return{messageList:newState};});};return _this;}_createClass(Chat,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"ui container\"},/*#__PURE__*/React.createElement(Navbar,{unauthenticator:this.props.unauthenticator,username:this.props.username}),/*#__PURE__*/React.createElement(MainScreen,{messageList:this.state.messageList,id:socket.id,key:this.state.messageKey,userList:this.state.userList}),/*#__PURE__*/React.createElement(TextInput,{messageSend:this.messageSend}));}}]);return Chat;}(React.Component);export default Chat;","map":{"version":3,"sources":["/Users/brunomoraes/Desktop/gardn/client/src/Components/chat.js"],"names":["React","Navbar","MainScreen","TextInput","socketIOClient","socket","Chat","state","messageList","messageKey","userList","componentDidMount","emit","props","username","userListReceive","messageReceive","getTime","console","log","myDate","Date","toTimeString","replace","slice","on","setState","message","addMessage","messageSend","newMessageKey","author","date","id","key","onButtonClick","event","unauthenticator","newEntry","newState","push","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Navbar from \"../Components/navbar\";\nimport MainScreen from \"../Components/mainscreen\";\nimport TextInput from \"../Components/textinput\";\nimport socketIOClient from \"socket.io-client\";\n\nconst socket = socketIOClient(\"http://161.35.136.196:5000/\");\n\nclass Chat extends React.Component {\n  state = { messageList: [], messageKey: 0, userList: [] };\n\n  componentDidMount = () => {\n    socket.emit(\"user update\", this.props.username);\n    this.userListReceive();\n    this.messageReceive();\n  };\n\n  getTime = () => {\n    console.log(this.state.userList);\n    var myDate = new Date()\n      .toTimeString()\n      .replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");\n    return myDate.slice(0, 5);\n  };\n\n  userListReceive = () => {\n    socket.on(\"user update\", (userList) => {\n      this.setState({ userList: userList });\n    });\n  };\n\n  messageReceive = () => {\n    socket.on(\"chat message\", (message) => {\n      this.addMessage(message);\n    });\n  };\n\n  messageSend = (message) => {\n    let newMessageKey;\n    message = {\n      message: message,\n      author: this.props.username,\n      date: this.getTime(),\n      id: socket.id,\n      key: this.state.messageKey,\n    };\n    newMessageKey = 1 + this.state.messageKey;\n    this.setState({ messageKey: newMessageKey });\n    this.addMessage(message);\n    socket.emit(\"chat message\", message);\n  };\n\n  onButtonClick = (event) => {\n    this.props.unauthenticator();\n  };\n\n  addMessage = (message) => {\n    let newEntry = message;\n    let newState = this.state.messageList;\n    newState.push(newEntry);\n    this.setState((state) => ({\n      messageList: newState,\n    }));\n  };\n\n  render() {\n    return (\n      <div className=\"ui container\">\n        <Navbar\n          unauthenticator={this.props.unauthenticator}\n          username={this.props.username}\n        />\n        <MainScreen\n          messageList={this.state.messageList}\n          id={socket.id}\n          key={this.state.messageKey}\n          userList={this.state.userList}\n        />\n        <TextInput messageSend={this.messageSend} />\n      </div>\n    );\n  }\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}